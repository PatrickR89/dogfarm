<% layout ('layout/boilerplate') %>

<div class="row">
  <div class="col-8 offset-2">
    <h3>Edit <%= competition.name %></h3>
    <form
      action="/competitions/<%= competition._id %>?_method=PUT"
      method="POST"
      enctype="multipart/form-data"
      novalidate
      class="needs-validation"
    >
      <label for="name" class="form-label">Name</label>
      <input
        type="text"
        name="competition[name]"
        id="name"
        class="form-control editorial-div mb-3"
        maxlength="50"
        required
        value="<%= competition.name %>"
      />

      <label for="startDate" class="form-label">Start date: <%= dateStart %></label>
      <input
        type="date"
        name="competition[startDate]"
        id="startDate"
        class="form-control editorial-div mb-3"
        required
        value="<%= dateStart %>"
      />

      <label for="endDate" class="form-label">End date: <%= dateEnd %></label>
      <input
        type="date"
        name="competition[endDate]"
        id="endDate"
        class="form-control editorial-div mb-3"
        required
        value="<%= dateEnd %>"
      />

      <label for="location" class="form-label">Location:</label>
      <input
        type="text"
        name="competition[location]"
        id="location"
        class="form-control editorial-div mb-3"
        maxlength="50"
        required
        value="<%= competition.location %>"
      />

      <label for="award" class="form-label">Award:</label>
      <input
        type="text"
        name="competition[award]"
        id="award"
        class="form-control editorial-div mb-3"
        maxlength="50"
        required
        value="<%= competition.award %>"
      />

      <label for="linkTo" class="form-label">Link to the event:</label>
      <input
        type="text"
        name="competition[linkTo]"
        id="linkTo"
        class="form-control editorial-div mb-3"
        required
        value="<%= competition.linkTo %>"
      />

      <label for="images" class="form-label"> Images: </label>
      <input
        class="form-control editorial-div mb-3"
        type="file"
        name="images"
        id="images"
        multiple
      />

      <div class="mb-3">
        <% competition.images.forEach(function(img, i) { %>
        <img src="<%= img.thumbnail %>" alt="" />
        <div class="form-check-inline">
          <input
            type="checkbox"
            id="image<%=i%>"
            name="deleteImages[]"
            value="<%=img.filename%>"
          />
        </div>
        <label for="image<%=i%>">Delete</label>
        <% }) %>
      </div>

      <label for="dog" class="form-label"> Our competitior: </label>
      <select
        class="form-select mb-3 editorial-div"
        name="competition[dog]"
        aria-label="Default select example"
        required
      >
        <% for (let dog of dogs) {%>
        <option value="<%= dog.name %>" <%= competition.dog === dog.name ? 'selected' : '' %> ><%= dog.name %></option>
        <% } %>
      </select>
      <div class="row" style="justify-content: center;">
      <button class="btn admin-btn btn-sm mb-3"
      style="width: 33%; justify-content: center" type="submit">Submit</button>
    </div>
    <div class="row" style="justify-content: center">
      <a
        href="/competitions"
        class="btn admin-btn btn-sm mb-3"
          style="width: 20%; justify-content: center"
        >Back to index</a
      >
    </div>
    </form>
  </div>

</div>
